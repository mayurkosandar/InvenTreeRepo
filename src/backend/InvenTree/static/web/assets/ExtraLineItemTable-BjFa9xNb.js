import{r as i,i as a,j as n}from"./vendor-BnaqX2_l.js";import{u as y,a as L,b as R,A as w}from"./UseForm-DwZIxEnj.js";import{b}from"./formatters-DBeaC9UC.js";import{e as h}from"./CommonForms-D6scP564.js";import{u as D,R as I,j,a as E,I as S}from"./InvenTreeTable-rEa-i3pt.js";import{a as F,e as M}from"./index-fPzgLVil.js";import{N as T,L as g}from"./ColumnRenderers-6jyK6a0i.js";function O({endpoint:o,orderId:l,currency:k,role:t}){const r=D("extra-line-item"),s=F(),x=i.useMemo(()=>[{accessor:"reference",switchable:!1},{accessor:"description"},{accessor:"quantity",switchable:!1},{accessor:"price",title:a._({id:"vWelsN"}),render:e=>b(e.price,{currency:e.price_currency})},{accessor:"total_price",title:a._({id:"KyZVKD"}),render:e=>b(e.price,{currency:e.price_currency,multiplier:e.quantity})},T({accessor:"notes"}),g({accessor:"link"})],[]),[A,m]=i.useState({}),[u,p]=i.useState(0),c=y({url:o,title:a._({id:"pwb7Yo"}),fields:h(),initialData:{...A,price_currency:k},table:r}),d=L({url:o,pk:u,title:a._({id:"vgosWS"}),fields:h(),table:r}),f=R({url:o,pk:u,title:a._({id:"tpKh8C"}),table:r}),C=i.useCallback(e=>[I({hidden:!s.hasChangeRole(t),onClick:()=>{p(e.pk),d.open()}}),j({hidden:!s.hasAddRole(t),onClick:()=>{m({...e}),c.open()}}),E({hidden:!s.hasDeleteRole(t),onClick:()=>{p(e.pk),f.open()}})],[s,t]),_=i.useMemo(()=>[n.jsx(w,{tooltip:a._({id:"xnxWkO"}),hidden:!s.hasAddRole(t),onClick:()=>{m({order:l}),c.open()}},"add-line-item")],[s,t]);return n.jsxs(n.Fragment,{children:[c.modal,d.modal,f.modal,n.jsx(S,{tableState:r,url:M(o),columns:x,props:{params:{order:l},rowActions:C,tableActions:_}})]})}export{O as E};
