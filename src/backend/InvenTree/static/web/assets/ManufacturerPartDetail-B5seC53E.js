import{r as o,i as a,j as t,ci as g,cT as M,Z as W,ad as v,cU as G,S as B}from"./vendor-BnaqX2_l.js";import{A as O}from"./AdminButton-GD-Bfrm9.js";import{I as Q,D as F,a as Y}from"./InstanceDetail-DvLVYRQt.js";import{D as Z,N as $}from"./NotesPanel-Dh1SrbjV.js";import{O as q,a as H,E as X,D as L}from"./ActionDropdown-D1A3arjv.js";import{P as V}from"./PageDetail-Ct_zKLxm.js";import{A as z}from"./AttachmentPanel-Ct80LGG4.js";import{P as J}from"./PanelGroup-CKTRVRga.js";import{a as R,A as s,U as l,e as N,m as i,f as ee}from"./index-fPzgLVil.js";import{b as te,u as ae}from"./CompanyForms-yUzzFM8E.js";import{u as w,a as P,b as T,A as re}from"./UseForm-DwZIxEnj.js";import{u as ie}from"./UseInstance-DbDyyJjp.js";import{u as se,R as oe,a as ne,I as le}from"./InvenTreeTable-rEa-i3pt.js";import{S as pe}from"./SupplierPartTable-BYXaclYG.js";import{C as de,d as ce}from"./BaseContext-CH9A7-TB.js";import"./formatters-DBeaC9UC.js";import"./dayjs.min-DlCiWWGX.js";import"./navigation-B-mN4luC.js";import"./YesNoButton-W51do83Q.js";import"./ColumnRenderers-6jyK6a0i.js";import"./Instance-DrUTN1gu.js";import"./ApiIcon-Bqf-O7I2.js";import"./GenericErrorPage-BDqvbBMU.js";import"./NotFound-Dr2EC1Qm.js";import"./PermissionDenied-BHX44oqK.js";import"./PageTitle-AnZP781e.js";import"./AttachmentLink-BJMgqQK8.js";import"./RemoteComponent-Who-27QQ.js";import"./DesktopAppView-CAvOv5f4.js";function me({params:_}){const r=se("manufacturer-part-parameter"),n=R(),e=o.useMemo(()=>[{accessor:"name",title:a._({id:"6YtxFj"}),sortable:!0,switchable:!1},{accessor:"value",title:a._({id:"wMHvYH"}),sortable:!0,switchable:!1},{accessor:"units",title:a._({id:"QrhaVg"}),sortable:!1,switchable:!0}],[]),p=te(),[h,f]=o.useState(void 0),k=w({url:s.manufacturer_part_parameter_list,title:a._({id:"WrK5aa"}),fields:p,table:r,initialData:{manufacturer_part:_.manufacturer_part}}),b=P({url:s.manufacturer_part_parameter_list,pk:h,title:a._({id:"FDjidN"}),fields:p,table:r}),c=T({url:s.manufacturer_part_parameter_list,pk:h,title:a._({id:"qSo+g1"}),table:r}),m=o.useCallback(u=>[oe({hidden:!n.hasChangeRole(l.purchase_order),onClick:()=>{f(u.pk),b.open()}}),ne({hidden:!n.hasDeleteRole(l.purchase_order),onClick:()=>{f(u.pk),c.open()}})],[n]),x=o.useMemo(()=>[t.jsx(re,{tooltip:a._({id:"WrK5aa"}),onClick:()=>{k.open()},hidden:!n.hasAddRole(l.purchase_order)},"add-parameter")],[n]);return t.jsxs(t.Fragment,{children:[k.modal,b.modal,c.modal,t.jsx(le,{url:N(s.manufacturer_part_parameter_list),tableState:r,columns:e,props:{params:{..._},rowActions:m,tableActions:x}})]})}function Oe(){var A,y;const{id:_}=de(),r=R(),n=ce(),{instance:e,instanceQuery:p,refreshInstance:h,requestStatus:f}=ie({endpoint:s.manufacturer_part_list,pk:_,hasPrimaryKey:!0,params:{part_detail:!0,manufacturer_detail:!0}}),k=o.useMemo(()=>{var D,C,I,S;if(p.isFetching)return t.jsx(g,{});const d=e??{},j=[{type:"link",name:"part",label:a._({id:"GNd5ad"}),model:i.part,hidden:!e.part},{type:"string",name:"part_detail.IPN",label:a._({id:"3wXEsN"}),copy:!0,icon:"serial",hidden:!((D=d.part_detail)!=null&&D.IPN)},{type:"string",name:"part_detail.description",label:a._({id:"Nu4oKW"}),copy:!0,icon:"info",hidden:!e.description}],K=[{type:"link",name:"manufacturer",label:a._({id:"+m9/3S"}),icon:"manufacturers",model:i.company,hidden:!e.manufacturer},{type:"string",name:"MPN",label:a._({id:"ZCCuT2"}),copy:!0,hidden:!e.MPN,icon:"reference"},{type:"string",name:"description",label:a._({id:"Nu4oKW"}),copy:!0,hidden:!e.description,icon:"info"},{type:"link",external:!0,name:"link",label:a._({id:"0R4wMK"}),copy:!0,hidden:!e.link}];return t.jsxs(Q,{children:[t.jsxs(M,{children:[t.jsx(M.Col,{span:4,children:t.jsx(Z,{appRole:l.part,src:(C=e==null?void 0:e.part_detail)==null?void 0:C.image,apiPath:N(s.part_list,(I=e==null?void 0:e.part_detail)==null?void 0:I.pk),pk:(S=e==null?void 0:e.part_detail)==null?void 0:S.pk})}),t.jsx(M.Col,{span:8,children:t.jsx(F,{title:a._({id:"sQRZ1+"}),fields:j,item:d})})]}),t.jsx(F,{title:a._({id:"BCSxrX"}),fields:K,item:d})]})},[e,p]),b=o.useMemo(()=>[{name:"details",label:a._({id:"uN9giG"}),icon:t.jsx(W,{}),content:k},{name:"parameters",label:a._({id:"F18WP3"}),icon:t.jsx(v,{}),content:e!=null&&e.pk?t.jsx(me,{params:{manufacturer_part:e.pk}}):t.jsx(g,{})},{name:"suppliers",label:a._({id:"9RecCt"}),icon:t.jsx(G,{}),content:e!=null&&e.pk?t.jsx(pe,{params:{manufacturer_part:e.pk}}):t.jsx(g,{})},z({model_type:i.manufacturerpart,model_id:e==null?void 0:e.pk}),$({model_type:i.manufacturerpart,model_id:e==null?void 0:e.pk})],[e]),c=ae(),m=P({url:s.manufacturer_part_list,pk:e==null?void 0:e.pk,title:a._({id:"b30yxS"}),fields:c,onFormSuccess:h}),x=w({url:s.manufacturer_part_list,title:a._({id:"uOeMYf"}),fields:c,initialData:{...e},follow:!0,modelType:i.manufacturerpart}),u=T({url:s.manufacturer_part_list,pk:e==null?void 0:e.pk,title:a._({id:"fMDrRl"}),onFormSuccess:()=>{n(ee(i.part,e.part))}}),E=o.useMemo(()=>[t.jsx(O,{model:i.manufacturerpart,id:e.pk},"admin"),t.jsx(q,{tooltip:a._({id:"D/ppgk"}),actions:[H({hidden:!r.hasAddRole(l.purchase_order),onClick:()=>x.open()}),X({hidden:!r.hasChangeRole(l.purchase_order),onClick:()=>m.open()}),L({hidden:!r.hasDeleteRole(l.purchase_order),onClick:()=>u.open()})]},"options")],[r,e]),U=o.useMemo(()=>{var d,j;return[{name:a._({id:"UOTpFa"}),url:"/purchasing/"},{name:((d=e==null?void 0:e.manufacturer_detail)==null?void 0:d.name)??a._({id:"+m9/3S"}),url:`/purchasing/manufacturer/${(j=e==null?void 0:e.manufacturer_detail)==null?void 0:j.pk}/`}]},[e]);return t.jsxs(t.Fragment,{children:[u.modal,x.modal,m.modal,t.jsx(Y,{status:f,loading:p.isFetching,children:t.jsxs(B,{gap:"xs",children:[t.jsx(V,{title:a._({id:"WssheI"}),subtitle:`${e.MPN} - ${(A=e.part_detail)==null?void 0:A.name}`,breadcrumbs:U,actions:E,imageUrl:(y=e==null?void 0:e.part_detail)==null?void 0:y.thumbnail,editAction:m.open,editEnabled:r.hasChangePermission(i.manufacturerpart)}),t.jsx(J,{pageKey:"manufacturerpart",panels:b,instance:e,model:i.manufacturerpart,id:e.pk})]})})]})}export{Oe as default};
