import{r as u,bA as W,j as e,S as T,T as I,bG as v,cx as P,i as l,L as y,cT as E,ex as D,G as A,bC as N,m as U,bT as $,da as ee,v as m,bD as s,by as se,b4 as k,ey as ie,ez as B,c4 as ne,l as K,eA as re,eB as V,bz as M,eC as G,eD as te,bO as le,co as de,eE as ae,aT as oe,eF as ce,cu as xe,eG as je,eH as he,ci as ue}from"./vendor-BnaqX2_l.js";import{P as _e}from"./PageTitle-AnZP781e.js";import{P as Ee,S as Te}from"./Placeholder-BPwe5DOX.js";import{P as me}from"./PanelGroup-CKTRVRga.js";import{U as L}from"./SettingList-CWkD4zaU.js";import{a as F,A as _,d as S,e as f,q as Se,u as p,I as fe,S as H}from"./index-fPzgLVil.js";import{T as i,d as Ce}from"./BaseContext-CH9A7-TB.js";import{Y as Re,a as w}from"./YesNoButton-W51do83Q.js";import{A as Ae}from"./ActionDropdown-D1A3arjv.js";import{a as ge}from"./UseForm-DwZIxEnj.js";import{L as pe,C as Ie}from"./LanguageSelect-C0CTtxn0.js";import"./navigation-B-mN4luC.js";import"./ApiIcon-Bqf-O7I2.js";import"./RemoteComponent-Who-27QQ.js";import"./dayjs.min-DlCiWWGX.js";import"./Instance-DrUTN1gu.js";function be(){const[n,r]=u.useState(!1),[c,x]=u.useState(!1),{isLoading:j,data:t}=W({queryKey:["sso-providers"],queryFn:()=>S.get(f(_.sso_providers)).then(h=>h.data)});return u.useEffect(()=>{t!==void 0&&(r(t.sso_enabled||!1),x(t.mfa_required||!1))},[t]),e.jsxs(T,{children:[e.jsx(I,{order:5,children:e.jsx(i,{id:"O3oNi5"})}),e.jsx(Pe,{}),e.jsx(I,{order:5,children:e.jsx(i,{id:"sGV/QR"})}),n?e.jsx(ye,{dataProvider:t}):e.jsx(v,{icon:e.jsx(P,{size:"1rem"}),title:l._({id:"GYQmzM"}),color:"yellow",children:e.jsx(i,{id:"Sm3zWc"})}),e.jsx(I,{order:5,children:e.jsx(i,{id:"gzRIYb"})}),j?e.jsx(y,{}):e.jsx(e.Fragment,{children:c?e.jsx(Oe,{}):e.jsx(v,{icon:e.jsx(P,{size:"1rem"}),title:l._({id:"GYQmzM"}),color:"yellow",children:e.jsx(i,{id:"3JPMTK"})})}),e.jsx(I,{order:5,children:e.jsx(i,{id:"TP9/K5"})}),e.jsx(Le,{})]})}function Pe(){const[n,r]=u.useState(""),[c,x]=u.useState(""),[j]=F(a=>[a.user]),{isLoading:t,data:h,refetch:g}=W({queryKey:["emails"],queryFn:()=>S.get(f(_.user_emails)).then(a=>a.data)});function C(a){S.post(f(a,void 0,{id:n}),{}).then(()=>{g()}).catch(R=>console.log(R.data))}function d(){S.post(f(_.user_emails),{email:c,user:j==null?void 0:j.pk}).then(()=>{g()}).catch(a=>console.log(a.data))}return t?e.jsx(y,{}):e.jsxs(E,{children:[e.jsx(E.Col,{span:6,children:e.jsx(D.Group,{value:n,onChange:r,name:"email_accounts",label:l._({id:"Xfy/DT"}),children:e.jsx(T,{mt:"xs",children:h.map(a=>e.jsx(D,{value:String(a.id),label:e.jsxs(A,{justify:"space-between",children:[a.email,a.primary&&e.jsx(N,{color:"blue",children:e.jsx(i,{id:"T/R+Qz"})}),a.verified?e.jsx(N,{color:"green",children:e.jsx(i,{id:"QDEWii"})}):e.jsx(N,{color:"yellow",children:e.jsx(i,{id:"VBTGXl"})})]})},a.id))})})}),e.jsx(E.Col,{span:6,children:e.jsxs(T,{children:[e.jsx(U,{children:e.jsx(i,{id:"oLztc+"})}),e.jsx($,{label:l._({id:"Y/cuRF"}),placeholder:l._({id:"JqLqpm"}),leftSection:e.jsx(ee,{}),value:c,onChange:a=>x(a.currentTarget.value)})]})}),e.jsx(E.Col,{span:6,children:e.jsxs(A,{children:[e.jsx(m,{onClick:()=>C(_.user_email_primary),children:e.jsx(i,{id:"g/Kbij"})}),e.jsx(m,{onClick:()=>C(_.user_email_verify),children:e.jsx(i,{id:"+GoJJW"})}),e.jsx(m,{onClick:()=>C(_.user_email_remove),children:e.jsx(i,{id:"t/YqKh"})})]})}),e.jsx(E.Col,{span:6,children:e.jsx(m,{onClick:d,children:e.jsx(i,{id:"0+CYPj"})})})]})}function ye({dataProvider:n}){const[r,c]=u.useState(""),[x,j]=u.useState(),{isLoading:t,data:h}=W({queryKey:["sso-list"],queryFn:()=>S.get(f(_.user_sso)).then(d=>d.data)});u.useEffect(()=>{if(n===void 0||h===void 0)return;const d=h.map(b=>b.provider);function a(b){return!d.includes(b.id)}let R=n.providers;R=R.filter(a),j(R)},[n,h]);function g(){S.post(f(_.user_sso_remove,void 0,{id:r})).then(()=>{Se.removeQueries({queryKey:["sso-list"]})}).catch(d=>console.log(d.data))}if(t)return e.jsx(y,{});function C({provider:d}){const a=e.jsx(m,{component:"a",href:d.connect,variant:"outline",disabled:!d.configured,children:e.jsxs(A,{justify:"space-between",children:[d.display_name,d.configured==!1&&e.jsx(P,{})]})},d.id);return d.configured?a:e.jsx(se,{label:l._({id:"vwfjas"}),children:a})}return e.jsxs(E,{children:[e.jsx(E.Col,{span:6,children:h.length==0?e.jsx(v,{icon:e.jsx(P,{size:"1rem"}),title:l._({id:"SDND4q"}),color:"yellow",children:e.jsx(i,{id:"fkCzQP"})}):e.jsxs(T,{children:[e.jsx(D.Group,{value:r,onChange:c,name:"sso_accounts",label:l._({id:"B1uCAI"}),children:e.jsx(T,{mt:"xs",children:h.map(d=>e.jsx(D,{value:String(d.id),label:d.provider},d.id))})}),e.jsx(m,{onClick:g,children:e.jsx(i,{id:"t/YqKh"})})]})}),e.jsx(E.Col,{span:6,children:e.jsxs(T,{children:[e.jsx(U,{children:"Add SSO Account"}),e.jsx(U,{children:x===void 0?e.jsx(i,{id:"yQE2r9"}):e.jsx(T,{gap:"xs",children:x.map(d=>e.jsx(C,{provider:d},d.id))})})]})})]})}function Oe(){return e.jsxs(e.Fragment,{children:["MFA Details",e.jsx(Ee,{})]})}function Le(){const{isLoading:n,data:r,refetch:c}=W({queryKey:["token-list"],queryFn:()=>S.get(f(_.user_tokens)).then(t=>t.data)});function x(t){S.delete(f(_.user_tokens,t)).then(()=>{c()}).catch(h=>console.log(h.data))}const j=u.useMemo(()=>n||r===void 0?null:r.map(t=>e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(Re,{value:t.active})}),e.jsx(s.Td,{children:t.expiry}),e.jsx(s.Td,{children:t.last_seen}),e.jsx(s.Td,{children:t.token}),e.jsx(s.Td,{children:t.name}),e.jsx(s.Td,{children:t.in_use?e.jsx(i,{id:"Wcm4Tk"}):e.jsx(m,{onClick:()=>x(t.id),color:"red",disabled:!t.active,children:e.jsx(i,{id:"GXsAby"})})})]},t.id)),[r,n]);return n?e.jsx(y,{}):r.length==0?e.jsx(v,{icon:e.jsx(P,{size:"1rem"}),color:"green",children:e.jsx(i,{id:"V9/zZt"})}):e.jsxs(s,{stickyHeader:!0,striped:!0,highlightOnHover:!0,withTableBorder:!0,children:[e.jsx(s.Thead,{children:e.jsxs(s.Tr,{children:[e.jsx(s.Th,{children:e.jsx(i,{id:"F6pfE9"})}),e.jsx(s.Th,{children:e.jsx(i,{id:"agO/T/"})}),e.jsx(s.Th,{children:e.jsx(i,{id:"bLZksC"})}),e.jsx(s.Th,{children:e.jsx(i,{id:"TP9/K5"})}),e.jsx(s.Th,{children:e.jsx(i,{id:"6YtxFj"})}),e.jsx(s.Th,{children:e.jsx(i,{id:"7L01XJ"})})]})}),e.jsx(s.Tbody,{children:j})]})}function He(){const n=Ce(),[r,c]=F(t=>[t.user,t.fetchUserState]),x=u.useMemo(()=>({first_name:{},last_name:{}}),[]),j=ge({title:l._({id:"//An38"}),url:_.user_me,onFormSuccess:c,fields:x,successMessage:l._({id:"kKNzpm"})});return e.jsxs(e.Fragment,{children:[j.modal,e.jsxs(T,{gap:"xs",children:[e.jsxs(A,{justify:"space-between",children:[e.jsx(I,{order:3,children:e.jsx(i,{id:"anfIXl"})}),e.jsx(Ae,{tooltip:l._({id:"14H4zc"}),icon:e.jsx(k,{}),actions:[{name:l._({id:"GTOcxw"}),icon:e.jsx(k,{}),tooltip:l._({id:"//An38"}),onClick:j.open},{name:l._({id:"VhMDMg"}),icon:e.jsx(ie,{}),tooltip:l._({id:"QzqxNm"}),onClick:()=>{n("/change-password")}}]})]}),e.jsx(s,{children:e.jsxs(s.Tbody,{children:[e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"7sNhEz"})}),e.jsx(s.Td,{children:r==null?void 0:r.username})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"kODvZJ"})}),e.jsx(s.Td,{children:r==null?void 0:r.first_name})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"UXBCwc"})}),e.jsx(s.Td,{children:r==null?void 0:r.last_name})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"0ib+Ql"})}),e.jsx(s.Td,{children:e.jsx(w,{value:r==null?void 0:r.is_staff})})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"agYOFs"})}),e.jsx(s.Td,{children:e.jsx(w,{value:r==null?void 0:r.is_superuser})})]})]})})]})]})}function ve(n){return{[B.colors[n][6]]:n}}const Y=Object.assign({},...Object.keys(B.colors).map(n=>ve(n)));function De({height:n}){const r=ne(),[c,x]=p(o=>[o.loader,o.setLoader]),[j,t]=u.useState(r.white);function h(o){p.setState({whiteColor:o}),t(o)}const[g,C]=u.useState(r.black);function d(o){p.setState({blackColor:o}),C(o)}function a(o){const O=H.find(Z=>Z.value===o);return O||H[0]}function R(){const o=H.find(O=>O.label===p.getState().radius);return o?o.value:50}const[b,z]=u.useState(R());function q(o){z(o),p.setState({radius:a(o).label})}function X(o){p.setState({primaryColor:Y[o]})}const Q=[{value:"bars",label:l._({id:"yIoFdU"})},{value:"oval",label:l._({id:"NAZGMM"})},{value:"dots",label:l._({id:"2AXZa8"})}];function J(o){o!==null&&x(o)}return e.jsxs(K,{w:"100%",mih:n,p:0,children:[e.jsx(I,{order:3,children:e.jsx(i,{id:"DdjH42"})}),e.jsx(s,{children:e.jsxs(s.Tbody,{children:[e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"vXIe7J"})}),e.jsx(s.Td,{children:e.jsx(pe,{width:200})}),e.jsx(s.Td,{children:fe})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"FpsvqB"})}),e.jsx(s.Td,{children:e.jsx(A,{justify:"left",children:e.jsx(Ie,{})})}),e.jsx(s.Td,{})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"ca2AYV"})}),e.jsx(s.Td,{children:e.jsx(re,{format:"hex",onChange:X,withPicker:!1,swatches:Object.keys(Y)})}),e.jsx(s.Td,{children:e.jsx(m,{color:r.primaryColor,variant:"light",children:e.jsx(i,{id:"HmI5oK"})})})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"160vo+"})}),e.jsx(s.Td,{children:e.jsx(V,{value:j,onChange:h})}),e.jsx(s.Td,{children:e.jsx(M,{variant:"default",onClick:()=>h("#FFFFFF"),children:e.jsx(G,{})})})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"u01284"})}),e.jsx(s.Td,{children:e.jsx(V,{value:g,onChange:d})}),e.jsx(s.Td,{children:e.jsx(M,{variant:"default",onClick:()=>d("#000000"),children:e.jsx(G,{})})})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"bjp1xg"})}),e.jsx(s.Td,{children:e.jsx(te,{label:o=>a(o).label,defaultValue:50,step:25,marks:H,value:b,onChange:q,mb:18})})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"EBeoY+"})}),e.jsx(s.Td,{children:e.jsx(A,{justify:"left",children:e.jsx(le,{data:Q,value:c,onChange:J})})}),e.jsx(s.Td,{children:e.jsx(A,{justify:"left",children:e.jsx(y,{type:c,mah:16,size:"sm"})})})]})]})})]})}function We(){return e.jsx("div",{children:e.jsxs(de,{cols:2,spacing:"md",children:[e.jsx(K,{w:"100%",children:e.jsx(He,{})}),e.jsx(E,{gutter:"md",children:e.jsx(E.Col,{children:e.jsx(De,{height:142})})})]})})}function Ze(){const[n,r]=F(x=>[x.user,x.isLoggedIn]),c=u.useMemo(()=>[{name:"account",label:l._({id:"AeXO77"}),icon:e.jsx(ae,{}),content:e.jsx(We,{})},{name:"security",label:l._({id:"a3LDKx"}),icon:e.jsx(oe,{}),content:e.jsx(be,{})},{name:"display",label:l._({id:"+4YDgS"}),icon:e.jsx(ce,{}),content:e.jsx(L,{keys:["STICKY_HEADER","DATE_DISPLAY_FORMAT","FORMS_CLOSE_USING_ESCAPE","PART_SHOW_QUANTITY_IN_FORMS","DISPLAY_SCHEDULE_TAB","DISPLAY_STOCKTAKE_TAB","TABLE_STRING_MAX_LENGTH"]})},{name:"search",label:l._({id:"A1taO8"}),icon:e.jsx(xe,{}),content:e.jsx(L,{keys:["SEARCH_WHOLE","SEARCH_REGEX","SEARCH_PREVIEW_RESULTS","SEARCH_PREVIEW_SHOW_PARTS","SEARCH_HIDE_INACTIVE_PARTS","SEARCH_PREVIEW_SHOW_SUPPLIER_PARTS","SEARCH_PREVIEW_SHOW_MANUFACTURER_PARTS","SEARCH_PREVIEW_SHOW_CATEGORIES","SEARCH_PREVIEW_SHOW_STOCK","SEARCH_PREVIEW_HIDE_UNAVAILABLE_STOCK","SEARCH_PREVIEW_SHOW_LOCATIONS","SEARCH_PREVIEW_SHOW_COMPANIES","SEARCH_PREVIEW_SHOW_BUILD_ORDERS","SEARCH_PREVIEW_SHOW_PURCHASE_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_PURCHASE_ORDERS","SEARCH_PREVIEW_SHOW_SALES_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_SALES_ORDERS","SEARCH_PREVIEW_SHOW_RETURN_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_RETURN_ORDERS"]})},{name:"notifications",label:l._({id:"iDNBZe"}),icon:e.jsx(je,{}),content:e.jsx(L,{keys:["NOTIFICATION_ERROR_REPORT"]})},{name:"reporting",label:l._({id:"ApEshE"}),icon:e.jsx(he,{}),content:e.jsx(L,{keys:["REPORT_INLINE","LABEL_INLINE","LABEL_DEFAULT_PRINTER"]})}],[]);return r()?e.jsxs(e.Fragment,{children:[e.jsx(_e,{title:l._({id:"ekfzWq"})}),e.jsxs(T,{gap:"xs",children:[e.jsx(Te,{label:"user",title:l._({id:"Puv7+X"}),subtitle:n!=null&&n.first_name&&(n!=null&&n.last_name)?`${n==null?void 0:n.first_name} ${n==null?void 0:n.last_name}`:null,shorthand:(n==null?void 0:n.username)||""}),e.jsx(me,{pageKey:"user-settings",panels:c,model:"usersettings",id:null})]})]}):e.jsx(ue,{})}export{Ze as default};
