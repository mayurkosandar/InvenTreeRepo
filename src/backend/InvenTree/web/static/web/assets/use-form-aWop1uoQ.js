import{r as l,bL as ae}from"./vendor-BnaqX2_l.js";function fe(t){if(!/^[0-9a-zA-Z-]+$/.test(t))throw new Error(`[@mantine/use-form] Form name "${t}" is invalid, it should contain only letters, numbers and dashes`)}const de=typeof window<"u"?l.useLayoutEffect:l.useEffect;function m(t,e){de(()=>{if(t)return window.addEventListener(t,e),()=>window.removeEventListener(t,e)},[t])}function be(t,e){t&&fe(t),m(`mantine-form:${t}:set-field-value`,r=>e.setFieldValue(r.detail.path,r.detail.value)),m(`mantine-form:${t}:set-values`,r=>e.setValues(r.detail)),m(`mantine-form:${t}:set-initial-values`,r=>e.setInitialValues(r.detail)),m(`mantine-form:${t}:set-errors`,r=>e.setErrors(r.detail)),m(`mantine-form:${t}:set-field-error`,r=>e.setFieldError(r.detail.path,r.detail.error)),m(`mantine-form:${t}:clear-field-error`,r=>e.clearFieldError(r.detail)),m(`mantine-form:${t}:clear-errors`,e.clearErrors),m(`mantine-form:${t}:reset`,e.reset),m(`mantine-form:${t}:validate`,e.validate),m(`mantine-form:${t}:validate-field`,r=>e.validateField(r.detail)),m(`mantine-form:${t}:reorder-list-item`,r=>e.reorderListItem(r.detail.path,r.detail.payload)),m(`mantine-form:${t}:remove-list-item`,r=>e.removeListItem(r.detail.path,r.detail.index)),m(`mantine-form:${t}:insert-list-item`,r=>e.insertListItem(r.detail.path,r.detail.item,r.detail.index)),m(`mantine-form:${t}:set-dirty`,r=>e.setDirty(r.detail)),m(`mantine-form:${t}:set-touched`,r=>e.setTouched(r.detail)),m(`mantine-form:${t}:reset-dirty`,r=>e.resetDirty(r.detail)),m(`mantine-form:${t}:reset-touched`,e.resetTouched)}function ye(t){return e=>{if(!e)t(e);else if(typeof e=="function")t(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:r}=e;r instanceof HTMLInputElement?r.type==="checkbox"?t(r.checked):t(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&t(r.value)}else t(e)}}function B(t){return t===null||typeof t!="object"?{}:Object.keys(t).reduce((e,r)=>{const n=t[r];return n!=null&&n!==!1&&(e[r]=n),e},{})}function Ee(t){const[e,r]=l.useState(B(t)),n=l.useRef(e),s=l.useCallback(i=>{r(a=>{const g=B(typeof i=="function"?i(a):i);return n.current=g,g})},[]),c=l.useCallback(()=>s({}),[]),o=l.useCallback(i=>{n.current[i]!==void 0&&s(a=>{const g={...a};return delete g[i],g})},[e]),f=l.useCallback((i,a)=>{a==null||a===!1?o(i):n.current[i]!==a&&s(g=>({...g,[i]:a}))},[e]);return{errorsState:e,setErrors:s,clearErrors:c,setFieldError:f,clearFieldError:o}}function H(t,e){if(e===null||typeof e!="object")return{};const r={...e};return Object.keys(e).forEach(n=>{n.includes(`${String(t)}.`)&&delete r[n]}),r}function J(t,e){const r=t.substring(e.length+1).split(".")[0];return parseInt(r,10)}function Q(t,e,r,n){if(e===void 0)return r;const s=`${String(t)}`;let c=r;n===-1&&(c=H(`${s}.${e}`,c));const o={...c},f=new Set;return Object.entries(c).filter(([i])=>{if(!i.startsWith(`${s}.`))return!1;const a=J(i,s);return Number.isNaN(a)?!1:a>=e}).forEach(([i,a])=>{const g=J(i,s),F=i.replace(`${s}.${g}`,`${s}.${g+n}`);o[F]=a,f.add(F),f.has(i)||delete o[i]}),o}function Ve(t,{from:e,to:r},n){const s=`${t}.${e}`,c=`${t}.${r}`,o={...n};return Object.keys(n).every(f=>{let i,a;if(f.startsWith(s)&&(i=f,a=f.replace(s,c)),f.startsWith(c)&&(i=f.replace(c,s),a=f),i&&a){const g=o[i],F=o[a];return F===void 0?delete o[i]:o[i]=F,g===void 0?delete o[a]:o[a]=g,!1}return!0}),o}function Y(t,e,r){typeof r.value=="object"&&(r.value=v(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||e==="__proto__"?Object.defineProperty(t,e,r):t[e]=r.value}function v(t){if(typeof t!="object")return t;var e=0,r,n,s,c=Object.prototype.toString.call(t);if(c==="[object Object]"?s=Object.create(t.__proto__||null):c==="[object Array]"?s=Array(t.length):c==="[object Set]"?(s=new Set,t.forEach(function(o){s.add(v(o))})):c==="[object Map]"?(s=new Map,t.forEach(function(o,f){s.set(v(f),v(o))})):c==="[object Date]"?s=new Date(+t):c==="[object RegExp]"?s=new RegExp(t.source,t.flags):c==="[object DataView]"?s=new t.constructor(v(t.buffer)):c==="[object ArrayBuffer]"?s=t.slice(0):c.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)Y(s,n[e],Object.getOwnPropertyDescriptor(t,n[e]));for(e=0,n=Object.getOwnPropertyNames(t);e<n.length;e++)Object.hasOwnProperty.call(s,r=n[e])&&s[r]===t[r]||Y(s,r,Object.getOwnPropertyDescriptor(t,r))}return s||t}function te(t){return typeof t!="string"?[]:t.split(".")}function k(t,e){const r=te(t);if(r.length===0||typeof e!="object"||e===null)return;let n=e[r[0]];for(let s=1;s<r.length&&n!=null;s+=1)n=n[r[s]];return n}function W(t,e,r){const n=te(t);if(n.length===0)return r;const s=v(r);if(n.length===1)return s[n[0]]=e,s;let c=s[n[0]];for(let o=1;o<n.length-1;o+=1){if(c===void 0)return s;c=c[n[o]]}return c[n[n.length-1]]=e,s}function ge(t,{from:e,to:r},n){const s=k(t,n);if(!Array.isArray(s))return n;const c=[...s],o=s[e];return c.splice(e,1),c.splice(r,0,o),W(t,c,n)}function Se(t,e,r,n){const s=k(t,n);if(!Array.isArray(s))return n;const c=[...s];return c.splice(typeof r=="number"?r:c.length,0,e),W(t,c,n)}function Fe(t,e,r){const n=k(t,r);return Array.isArray(n)?W(t,n.filter((s,c)=>c!==e),r):r}function je({$values:t,$errors:e,$status:r}){const n=l.useCallback((o,f)=>{r.clearFieldDirty(o),e.setErrors(i=>Ve(o,f,i)),t.setValues({values:ge(o,f,t.refValues.current),updateState:!0})},[]),s=l.useCallback((o,f)=>{r.clearFieldDirty(o),e.setErrors(i=>Q(o,f,i,-1)),t.setValues({values:Fe(o,f,t.refValues.current),updateState:!0})},[]),c=l.useCallback((o,f,i)=>{r.clearFieldDirty(o),e.setErrors(a=>Q(o,i,a,1)),t.setValues({values:Se(o,f,i,t.refValues.current),updateState:!0})},[]);return{reorderListItem:n,removeListItem:s,insertListItem:c}}var me=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,c;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(c=Object.keys(e),n=c.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,c[s]))return!1;for(s=n;s--!==0;){var o=c[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r};const z=ae(me);function N(t,e){const r=Object.keys(t);if(typeof e=="string"){const n=r.filter(s=>s.startsWith(`${e}.`));return t[e]||n.some(s=>t[s])||!1}return r.some(n=>t[n])}function pe({initialDirty:t,initialTouched:e,mode:r,$values:n}){const[s,c]=l.useState(e),[o,f]=l.useState(t),i=l.useRef(e),a=l.useRef(t),g=l.useCallback(d=>{const E=typeof d=="function"?d(i.current):d;i.current=E,r==="controlled"&&c(E)},[]),F=l.useCallback((d,E=!1)=>{const j=typeof d=="function"?d(a.current):d;a.current=j,(r==="controlled"||E)&&f(j)},[]),O=l.useCallback(()=>g({}),[]),S=d=>{const E=d?{...d,...n.refValues.current}:n.refValues.current;n.setValuesSnapshot(E),F({})},y=l.useCallback((d,E)=>{g(j=>N(j,d)===E?j:{...j,[d]:E})},[]),b=l.useCallback((d,E,j)=>{F(w=>N(w,d)===E?w:{...w,[d]:E},j)},[]),D=l.useCallback((d,E)=>{const j=N(a.current,d),w=!z(k(d,n.getValuesSnapshot()),E),I=H(d,a.current);I[d]=w,F(I,j!==w)},[]),C=l.useCallback(d=>N(i.current,d),[]),R=l.useCallback(d=>F(E=>{if(typeof d!="string")return E;const j=H(d,E);return delete j[d],z(j,E)?E:j}),[]),$=l.useCallback(d=>{if(d){const j=k(d,a.current);if(typeof j=="boolean")return j;const w=k(d,n.refValues.current),I=k(d,n.valuesSnapshot.current);return!z(w,I)}return Object.keys(a.current).length>0?N(a.current):!z(n.refValues.current,n.valuesSnapshot.current)},[]),L=l.useCallback(()=>a.current,[]),h=l.useCallback(()=>i.current,[]);return{touchedState:s,dirtyState:o,touchedRef:i,dirtyRef:a,setTouched:g,setDirty:F,resetDirty:S,resetTouched:O,isTouched:C,setFieldTouched:y,setFieldDirty:b,setTouchedState:c,setDirtyState:f,clearFieldDirty:R,isDirty:$,getDirty:L,getTouched:h,setCalculatedFieldDirty:D}}function ke({initialValues:t,onValuesChange:e,mode:r}){const n=l.useRef(!1),[s,c]=l.useState(t||{}),o=l.useRef(s),f=l.useRef(s),i=l.useCallback(({values:b,subscribers:D,updateState:C=!0,mergeWithPreviousValues:R=!0})=>{const $=o.current,L=b instanceof Function?b(o.current):b,h=R?{...$,...L}:L;o.current=h,C&&c(h),e==null||e(h,$),D==null||D.filter(Boolean).forEach(d=>d({updatedValues:h,previousValues:$}))},[e]),a=l.useCallback(b=>{var R;const D=k(b.path,o.current),C=b.value instanceof Function?b.value(D):b.value;if(D!==C){const $=o.current,L=W(b.path,C,o.current);i({values:L,updateState:b.updateState}),(R=b.subscribers)==null||R.filter(Boolean).forEach(h=>h({path:b.path,updatedValues:L,previousValues:$}))}},[i]),g=l.useCallback(b=>{f.current=b},[]),F=l.useCallback((b,D)=>{n.current||(n.current=!0,i({values:b,updateState:r==="controlled"}),g(b),D())},[i]),O=l.useCallback(()=>{i({values:f.current,updateState:!0,mergeWithPreviousValues:!1})},[i]),S=l.useCallback(()=>o.current,[]),y=l.useCallback(()=>f.current,[]);return{initialized:n,stateValues:s,refValues:o,valuesSnapshot:f,setValues:i,setFieldValue:a,resetValues:O,setValuesSnapshot:g,initialize:F,getValues:S,getValuesSnapshot:y}}function Oe({$status:t}){const e=l.useRef({}),r=l.useCallback((s,c)=>{l.useEffect(()=>(e.current[s]=e.current[s]||[],e.current[s].push(c),()=>{e.current[s]=e.current[s].filter(o=>o!==c)}),[c])},[]),n=l.useCallback(s=>e.current[s]?e.current[s].map(c=>o=>c({previousValue:k(s,o.previousValues),value:k(s,o.updatedValues),touched:t.isTouched(s),dirty:t.isDirty(s)})):[],[]);return{subscribers:e,watch:r,getFieldSubscribers:n}}function G(t,e){return t?`${t}-${e.toString()}`:e.toString()}function x(t){const e=B(t);return{hasErrors:Object.keys(e).length>0,errors:e}}function U(t,e,r="",n={}){return typeof t!="object"||t===null?n:Object.keys(t).reduce((s,c)=>{const o=t[c],f=`${r===""?"":`${r}.`}${c}`,i=k(f,e);let a=!1;return typeof o=="function"&&(s[f]=o(i,e,f)),typeof o=="object"&&Array.isArray(i)&&(a=!0,i.forEach((g,F)=>U(o,e,`${f}.${F}`,s))),typeof o=="object"&&typeof i=="object"&&i!==null&&(a||U(o,e,f,s)),s},n)}function X(t,e){return x(typeof t=="function"?t(e):U(t,e))}function K(t,e,r){if(typeof t!="string")return{hasError:!1,error:null};const n=X(e,r),s=Object.keys(n.errors).find(c=>t.split(".").every((o,f)=>o===c.split(".")[f]));return{hasError:!!s,error:s?n.errors[s]:null}}const De="__MANTINE_FORM_INDEX__";function ee(t,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(t.replace(/[.][0-9]/g,`.${De}`)):!1:!1}function $e({name:t,mode:e="controlled",initialValues:r,initialErrors:n={},initialDirty:s={},initialTouched:c={},clearInputErrorOnChange:o=!0,validateInputOnChange:f=!1,validateInputOnBlur:i=!1,onValuesChange:a,transformValues:g=S=>S,enhanceGetInputProps:F,validate:O}={}){const S=Ee(n),y=ke({initialValues:r,onValuesChange:a,mode:e}),b=pe({initialDirty:s,initialTouched:c,$values:y,mode:e}),D=je({$values:y,$errors:S,$status:b}),C=Oe({$status:b}),[R,$]=l.useState(0),[L,h]=l.useState({}),d=l.useCallback(()=>{y.resetValues(),S.clearErrors(),b.resetDirty(),b.resetTouched(),e==="uncontrolled"&&$(u=>u+1)},[]),E=l.useCallback(u=>{o&&S.clearErrors(),e==="uncontrolled"&&$(V=>V+1),Object.keys(C.subscribers.current).forEach(V=>{const p=k(V,y.refValues.current),T=k(V,u);p!==T&&C.getFieldSubscribers(V).forEach(P=>P({previousValues:u,updatedValues:y.refValues.current}))})},[o]),j=l.useCallback(u=>{const V=y.refValues.current;y.initialize(u,()=>e==="uncontrolled"&&$(p=>p+1)),E(V)},[E]),w=l.useCallback((u,V,p)=>{const T=ee(u,f),P=V instanceof Function?V(k(u,y.refValues.current)):V;b.setCalculatedFieldDirty(u,P),b.setFieldTouched(u,!0),!T&&o&&S.clearFieldError(u),y.setFieldValue({path:u,value:V,updateState:e==="controlled",subscribers:[...C.getFieldSubscribers(u),T?_=>{const A=K(u,O,_.updatedValues);A.hasError?S.setFieldError(u,A.error):S.clearFieldError(u)}:null,(p==null?void 0:p.forceUpdate)!==!1&&e!=="controlled"?()=>h(_=>({..._,[u]:(_[u]||0)+1})):null]})},[a,O]),I=l.useCallback(u=>{const V=y.refValues.current;y.setValues({values:u,updateState:e==="controlled"}),E(V)},[a,E]),Z=l.useCallback(()=>{const u=X(O,y.refValues.current);return S.setErrors(u.errors),u},[O]),re=l.useCallback(u=>{const V=K(u,O,y.refValues.current);return V.hasError?S.setFieldError(u,V.error):S.clearFieldError(u),V},[O]),se=(u,{type:V="input",withError:p=!0,withFocus:T=!0,...P}={})=>{const A={onChange:ye(M=>w(u,M,{forceUpdate:!1})),"data-path":G(t,u)};return p&&(A.error=S.errorsState[u]),V==="checkbox"?A[e==="controlled"?"checked":"defaultChecked"]=k(u,y.refValues.current):A[e==="controlled"?"value":"defaultValue"]=k(u,y.refValues.current),T&&(A.onFocus=()=>b.setFieldTouched(u,!0),A.onBlur=()=>{if(ee(u,i)){const M=K(u,O,y.refValues.current);M.hasError?S.setFieldError(u,M.error):S.clearFieldError(u)}}),Object.assign(A,F==null?void 0:F({inputProps:A,field:u,options:{type:V,withError:p,withFocus:T,...P},form:q}))},ne=(u,V)=>p=>{p==null||p.preventDefault();const T=Z();T.hasErrors?V==null||V(T.errors,y.refValues.current,p):u==null||u(g(y.refValues.current),p)},oe=u=>g(u||y.refValues.current),ce=l.useCallback(u=>{u.preventDefault(),d()},[]),ue=l.useCallback(u=>u?!K(u,O,y.refValues.current).hasError:!X(O,y.refValues.current).hasErrors,[O]),ie=u=>`${R}-${u}-${L[u]||0}`,le=l.useCallback(u=>document.querySelector(`[data-path="${G(t,u)}"]`),[]),q={watch:C.watch,initialized:y.initialized.current,values:y.stateValues,getValues:y.getValues,setInitialValues:y.setValuesSnapshot,initialize:j,setValues:I,setFieldValue:w,errors:S.errorsState,setErrors:S.setErrors,setFieldError:S.setFieldError,clearFieldError:S.clearFieldError,clearErrors:S.clearErrors,resetDirty:b.resetDirty,setTouched:b.setTouched,setDirty:b.setDirty,isTouched:b.isTouched,resetTouched:b.resetTouched,isDirty:b.isDirty,getTouched:b.getTouched,getDirty:b.getDirty,reorderListItem:D.reorderListItem,insertListItem:D.insertListItem,removeListItem:D.removeListItem,reset:d,validate:Z,validateField:re,getInputProps:se,onSubmit:ne,onReset:ce,isValid:ue,getTransformedValues:oe,key:ie,getInputNode:le};return be(t,q),q}export{$e as u};
