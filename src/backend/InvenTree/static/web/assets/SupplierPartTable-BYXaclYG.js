import{r,j as i,i as a,m as h}from"./vendor-BnaqX2_l.js";import{u as F,A as j,a as M,b as E}from"./UseForm-DwZIxEnj.js";import{T as f}from"./Instance-DrUTN1gu.js";import{a as R,A as u,U as o,e as D,m as g}from"./index-fPzgLVil.js";import{a as k}from"./CompanyForms-yUzzFM8E.js";import{u as w,R as y,a as U,I as N}from"./InvenTreeTable-rEa-i3pt.js";import{a as Q,D as B,B as I,f as P,L,N as O}from"./ColumnRenderers-6jyK6a0i.js";function K({params:s}){const n=w("supplierparts"),l=R(),S=r.useMemo(()=>[{accessor:"part",switchable:"part"in s,sortable:!0,render:e=>Q({part:e==null?void 0:e.part_detail})},{accessor:"supplier",sortable:!0,render:e=>{const t=(e==null?void 0:e.supplier_detail)??{};return t!=null&&t.pk?i.jsx(f,{src:(t==null?void 0:t.thumbnail)??t.image,text:t.name}):"-"}},{accessor:"SKU",title:a._({id:"nne72x"}),sortable:!0},B({}),{accessor:"manufacturer",sortable:!0,render:e=>{const t=(e==null?void 0:e.manufacturer_detail)??{};return t!=null&&t.pk?i.jsx(f,{src:(t==null?void 0:t.thumbnail)??t.image,text:t.name}):"-"}},{accessor:"MPN",sortable:!0,title:a._({id:"TOxiOu"}),render:e=>{var t;return(t=e==null?void 0:e.manufacturer_part_detail)==null?void 0:t.MPN}},I({accessor:"active",title:a._({id:"F6pfE9"}),sortable:!0,switchable:!0}),{accessor:"in_stock",sortable:!0},{accessor:"packaging",sortable:!0},{accessor:"pack_quantity",sortable:!0,render:e=>{const t=(e==null?void 0:e.part_detail)??{},x=[];return t.units&&x.push(i.jsxs(h,{children:[a._({id:"v9F5VO"})," : ",t.units]},"base")),i.jsx(P,{value:e.pack_quantity,extra:x,title:a._({id:"J9LTXQ"})})}},L({}),O({}),{accessor:"available",sortable:!0,render:e=>{const t=[];return e.availablility_updated&&t.push(i.jsxs(h,{children:[a._({id:"+b7T3G"})," : ",e.availablility_updated]})),i.jsx(P,{value:e.available,extra:t})}}],[s]),A=k({partId:s==null?void 0:s.part}),p=F({url:u.supplier_part_list,title:a._({id:"EREF+D"}),fields:A,initialData:{part:s==null?void 0:s.part,supplier:s==null?void 0:s.supplier},table:n,successMessage:a._({id:"LjPQ/X"})}),T=r.useMemo(()=>[i.jsx(j,{tooltip:a._({id:"PsAftp"}),onClick:()=>p.open(),hidden:!l.hasAddRole(o.purchase_order)},"add-supplier-part")],[l]),v=r.useMemo(()=>[{name:"active",label:a._({id:"F6pfE9"}),description:a._({id:"fPFpxB"})},{name:"part_active",label:a._({id:"9RQlSP"}),description:a._({id:"AS2E8V"})},{name:"supplier_active",label:a._({id:"2OQxz2"}),description:a._({id:"T+mlMU"})},{name:"has_stock",label:a._({id:"zn38D/"}),description:a._({id:"u22Ntx"})}],[]),d=k({}),[c,_]=r.useState(0),b=M({url:u.supplier_part_list,pk:c,title:a._({id:"qZstuw"}),fields:d,table:n}),m=E({url:u.supplier_part_list,pk:c,title:a._({id:"9Qoago"}),table:n}),C=r.useCallback(e=>[y({hidden:!l.hasChangeRole(o.purchase_order),onClick:()=>{_(e.pk),b.open()}}),U({hidden:!l.hasDeleteRole(o.purchase_order),onClick:()=>{_(e.pk),m.open()}})],[l,d]);return i.jsxs(i.Fragment,{children:[p.modal,b.modal,m.modal,i.jsx(N,{url:D(u.supplier_part_list),tableState:n,columns:S,props:{params:{...s,part_detail:!0,supplier_detail:!0,manufacturer_detail:!0},rowActions:C,enableDownload:!0,tableActions:T,tableFilters:v,modelType:g.supplierpart}})]})}export{K as S};
