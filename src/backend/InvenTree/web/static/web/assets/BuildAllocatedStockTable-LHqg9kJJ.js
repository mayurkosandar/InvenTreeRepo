import{r,i as t,j as u}from"./vendor-BnaqX2_l.js";import{a as T,m as h,A as c,U as d,e as y}from"./index-fPzgLVil.js";import{a as D,b as g}from"./UseForm-DwZIxEnj.js";import{u as E,R as M,a as N,I as j}from"./InvenTreeTable-rEa-i3pt.js";import{R as v,S as F,a as U,h as q}from"./ColumnRenderers-6jyK6a0i.js";function K({buildId:f,stockId:C,partId:a,showBuildInfo:s,showPartInfo:o,allowEdit:b,modelTarget:R,modelField:w}){const i=T(),n=E(a?"buildallocatedstock-part":"buildallocatedstock"),A=r.useMemo(()=>{const e=[{name:"tracked",label:t._({id:"ML+087"}),description:t._({id:"mVVw+/"})}];return a&&e.push({name:"include_variants",type:"boolean",label:t._({id:"/g9i/Z"}),description:t._({id:"NkXwQy"})}),e},[a]),S=r.useMemo(()=>[v({accessor:"build_detail.reference",title:t._({id:"YxwWvi"}),switchable:!1,hidden:s!=!0}),{accessor:"build_detail.title",title:t._({id:"Nu4oKW"}),hidden:s!=!0},F({accessor:"build_detail.status",model:h.build,title:t._({id:"acIJ41"}),hidden:s!=!0}),{accessor:"part",hidden:!o,title:t._({id:"vgP+9p"}),sortable:!0,switchable:!1,render:e=>U({part:e.part_detail})},{accessor:"part_detail.IPN",ordering:"IPN",hidden:!o,title:t._({id:"3wXEsN"}),sortable:!0,switchable:!0},{hidden:!o,accessor:"bom_reference",title:t._({id:"N2C89m"}),sortable:!0,switchable:!0},{accessor:"quantity",title:t._({id:"Tk6w1l"}),sortable:!0,switchable:!1},{accessor:"serial",title:t._({id:"AXeJt4"}),sortable:!1,switchable:!0,render:e=>{var l;return(l=e==null?void 0:e.stock_item_detail)==null?void 0:l.serial}},{accessor:"batch",title:t._({id:"Vea6Aj"}),sortable:!1,switchable:!0,render:e=>{var l;return(l=e==null?void 0:e.stock_item_detail)==null?void 0:l.batch}},{accessor:"available",title:t._({id:"I8CEek"}),render:e=>{var l;return(l=e==null?void 0:e.stock_item_detail)==null?void 0:l.quantity}},q({accessor:"location_detail",switchable:!0,sortable:!0}),{accessor:"install_into",title:t._({id:"gILim+"}),sortable:!0},{accessor:"sku",title:t._({id:"nne72x"}),render:e=>{var l;return(l=e==null?void 0:e.supplier_part_detail)==null?void 0:l.SKU},sortable:!0}],[]),[m,_]=r.useState(0),p=D({pk:m,url:c.build_item_list,title:t._({id:"Tqnsor"}),fields:{stock_item:{disabled:!0},quantity:{}},table:n}),k=g({pk:m,url:c.build_item_list,title:t._({id:"nV5okC"}),table:n}),x=r.useCallback(e=>[M({hidden:!i.hasChangeRole(d.build),onClick:()=>{_(e.pk),p.open()}}),N({hidden:!i.hasDeleteRole(d.build),onClick:()=>{_(e.pk),k.open()}})],[i]);return u.jsxs(u.Fragment,{children:[p.modal,k.modal,u.jsx(j,{tableState:n,url:y(c.build_item_list),columns:S,props:{params:{build:f,part:a,stock_item:C,build_detail:s??!1,part_detail:o??!1,location_detail:!0,stock_detail:!0,supplier_detail:!0},enableBulkDelete:b&&i.hasDeleteRole(d.build),enableDownload:!0,enableSelection:b&&i.hasDeleteRole(d.build),rowActions:x,tableFilters:A,modelField:w??"stock_item",modelType:R??h.stockitem}})]})}export{K as B};
