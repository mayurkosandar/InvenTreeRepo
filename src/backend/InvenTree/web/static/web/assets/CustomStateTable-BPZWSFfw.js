import{r as s,i as e,j as l,bC as G}from"./vendor-BnaqX2_l.js";import{u as h,a as I,b as y,A as E}from"./UseForm-DwZIxEnj.js";import{p as U,a as V,s as j,A as i,U as m,e as N}from"./index-fPzgLVil.js";import{u as p}from"./CommonForms-D6scP564.js";import{u as O,R as z,j as B,a as Q,I as q}from"./InvenTreeTable-rEa-i3pt.js";import"./BaseContext-CH9A7-TB.js";import"./dayjs.min-DlCiWWGX.js";import"./ApiIcon-Bqf-O7I2.js";import"./Instance-DrUTN1gu.js";import"./navigation-B-mN4luC.js";import"./DesktopAppView-CAvOv5f4.js";import"./ActionDropdown-D1A3arjv.js";function st(){const o=O("customstates"),r=U(),_=s.useCallback((t,c)=>{const u=Object.values(r.status??{}).find(d=>d.status_class===t),a=Object.values((u==null?void 0:u.values)??{}).find(d=>d.key===c);return(a==null?void 0:a.label)??(a==null?void 0:a.name)??""},[r]),n=V(),T=s.useMemo(()=>[{name:"reference_status",label:e._({id:"TGcVE+"}),field_type:"choice",choices:Object.values(r.status??{}).map(t=>({label:t.status_class,value:t.status_class}))}],[r]),g=s.useMemo(()=>[{accessor:"reference_status",title:e._({id:"uAQUqI"}),sortable:!0},{accessor:"logical_key",title:e._({id:"Iz1I4v"}),sortable:!0,render:t=>{const c=_(t.reference_status,t.logical_key);return c||t.logical_key}},{accessor:"name",title:e._({id:"sJGljQ"}),sortable:!0},{accessor:"label",title:e._({id:"0gS7M5"}),sortable:!0},{accessor:"key",sortable:!0},{accessor:"color",render:t=>l.jsx(G,{color:j[t.color]||j.default,variant:"filled",size:"xs",children:t.color})}],[_]),F=p(),M=p(),R=p(),[v,b]=s.useState({}),C=h({url:i.custom_state_list,title:e._({id:"vTGxVN"}),fields:F,table:o}),S=h({url:i.custom_state_list,title:e._({id:"vTGxVN"}),fields:M,initialData:v,table:o}),[f,k]=s.useState(void 0),A=I({url:i.custom_state_list,pk:f,title:e._({id:"/viGTM"}),fields:R,table:o}),x=y({url:i.custom_state_list,pk:f,title:e._({id:"Yrs5A6"}),table:o}),D=s.useCallback(t=>[z({hidden:!n.hasChangeRole(m.admin),onClick:()=>{k(t.pk),A.open()}}),B({hidden:!n.hasAddRole(m.admin),onClick:()=>{b(t),S.open()}}),Q({hidden:!n.hasDeleteRole(m.admin),onClick:()=>{k(t.pk),x.open()}})],[n]),w=s.useMemo(()=>[l.jsx(E,{onClick:()=>{b({}),C.open()},tooltip:e._({id:"vTGxVN"})},"add")],[]);return l.jsxs(l.Fragment,{children:[C.modal,A.modal,S.modal,x.modal,l.jsx(q,{url:N(i.custom_state_list),tableState:o,columns:g,props:{rowActions:D,tableActions:w,tableFilters:T,enableDownload:!0}})]})}export{st as default};
