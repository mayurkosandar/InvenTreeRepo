import{r as c,bA as F}from"./vendor-BnaqX2_l.js";import{e as O,d as R}from"./index-fPzgLVil.js";function x({endpoint:i,pk:r,params:u={},defaultValue:e={},pathParams:a,hasPrimaryKey:y=!0,refetchOnMount:S=!0,refetchOnWindowFocus:g=!1,throwError:m=!1,updateInterval:I}){const[q,n]=c.useState(e),[E,o]=c.useState(0),s=F({queryKey:["instance",i,r,JSON.stringify(u),JSON.stringify(a)],queryFn:async()=>{if(y&&(r==null||r==null||r.toString().length==0||r=="-1"))return n(e),e;const f=O(i,r,a);return R.get(f,{timeout:1e4,params:u}).then(t=>{switch(o(t.status),t.status){case 200:return n(t.data),t.data;default:return n(e),e}}).catch(t=>{var h;if(o(((h=t.response)==null?void 0:h.status)||0),n(e),console.error(`ERR: Error fetching instance ${f}:`,t),m)throw t;return e})},refetchOnMount:S,refetchOnWindowFocus:g??!1,refetchInterval:I}),b=c.useMemo(()=>s.isFetched&&s.isSuccess&&!s.isError,[s]),l=c.useCallback(()=>{s.refetch()},[]),w=c.useCallback(()=>s.refetch(),[]);return{instance:q,setInstance:n,refreshInstance:l,refreshInstancePromise:w,instanceQuery:s,requestStatus:E,isLoaded:b}}export{x as u};
