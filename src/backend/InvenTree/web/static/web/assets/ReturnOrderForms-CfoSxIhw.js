import{r as o,j as s,i as n,b4 as f,d_ as _,d$ as p,bD as u,cq as x}from"./vendor-BnaqX2_l.js";import{R as j}from"./RemoveRowButton-Dm_wD7jw.js";import{u as h,S as y}from"./UseForm-DwZIxEnj.js";import{T as b}from"./Instance-DrUTN1gu.js";import{e as F,A as v,m as g}from"./index-fPzgLVil.js";import{S as R}from"./InvenTreeTable-rEa-i3pt.js";function U({duplicateOrderId:e}){return o.useMemo(()=>{const t={reference:{},description:{},customer:{disabled:e!=null,filters:{is_customer:!0,active:!0}},customer_reference:{},project_code:{},order_currency:{},target_date:{},link:{},contact:{icon:s.jsx(f,{}),adjustFilters:i=>({...i.filters,company:i.data.customer})},address:{icon:s.jsx(_,{}),adjustFilters:i=>({...i.filters,company:i.data.customer})},responsible:{filters:{is_active:!0},icon:s.jsx(p,{})}};return e&&(t.duplicate={children:{order_id:{hidden:!0,value:e},copy_lines:{value:!1,hidden:!0},copy_extra_lines:{}}}),t},[e])}function D({orderId:e,customerId:t,create:i}){return o.useMemo(()=>({order:{disabled:!0,filters:{customer_detail:!0}},item:{filters:{customer:t,part_detail:!0}},quantity:{},reference:{},outcome:{hidden:i==!0},price:{},price_currency:{},target_date:{},notes:{},link:{}}),[i,e,t])}function T({props:e,record:t}){var d,a,c;const i=o.useMemo(()=>{var r;return((r=R(g.stockitem)())==null?void 0:r.map(m=>({value:m.value,display_name:m.label})))??[]},[]),l=o.useMemo(()=>{var r;return(r=t.item_detail)!=null&&r.serial&&t.quantity==1?`# ${t.item_detail.serial}`:t.quantity},[t.quantity,t.item_detail]);return s.jsx(s.Fragment,{children:s.jsxs(u.Tr,{children:[s.jsx(u.Td,{children:s.jsxs(x,{gap:"sm",align:"center",children:[s.jsx(b,{size:40,src:t.part_detail.thumbnail,align:"center"}),s.jsx("div",{children:t.part_detail.name})]})}),s.jsx(u.Td,{children:l}),s.jsx(u.Td,{children:s.jsx(y,{fieldDefinition:{field_type:"choice",label:n._({id:"uAQUqI"}),choices:i,onValueChange:r=>{e.changeFn(e.idx,"status",r)}},defaultValue:(d=t.item_detail)==null?void 0:d.status,error:(c=(a=e.rowErrors)==null?void 0:a.status)==null?void 0:c.message})}),s.jsx(u.Td,{children:s.jsx(j,{onClick:()=>e.removeFn(e.idx)})})]})})}function E(e){const t={id:{value:e.orderId,hidden:!0},items:{field_type:"table",value:e.items.map(i=>({item:i.pk})),modelRenderer:i=>{const l=e.items.find(d=>{var a;return d.pk==((a=i==null?void 0:i.item)==null?void 0:a.item)});return s.jsx(T,{props:i,record:l},l.pk)},headers:[n._({id:"vgP+9p"}),n._({id:"VbWX2u"}),n._({id:"uAQUqI"})]},location:{filters:{structural:!1}}};return h({url:F(v.return_order_receive,e.orderId),title:n._({id:"iwAbO1"}),fields:t,initialData:{location:null},size:"80%",onFormSuccess:e.onFormSuccess,successMessage:n._({id:"9U/ZsL"})})}export{D as a,E as b,U as u};
